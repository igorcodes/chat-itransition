(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[0],{75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(38),r=n.n(c),o=n(18),i=n.n(o),l=n(20),u=n(8),j=n(22),d=n.n(j),b=n(44),O=Object(b.a)(),m=n(45),p=n(2),h=function(e,t){switch(t.type){case"JOINED":return Object(p.a)(Object(p.a)({},e),{},{joined:!0,userName:t.payload.userName,roomId:t.payload.roomId});case"SET_DATA":return Object(p.a)(Object(p.a)({},e),{},{users:t.payload.users,messages:t.payload.messages});case"SET_USERS":return Object(p.a)(Object(p.a)({},e),{},{users:t.payload});case"NEW_MESSAGE":return Object(p.a)(Object(p.a)({},e),{},{messages:[].concat(Object(m.a)(e.messages),[t.payload])});default:return e}},f=n(3),g=n(4),x=n(6),S=n(5),E=n(0),v=function(e){var t=e.name,n=e.imgUrl;return Object(E.jsxs)(s.a.Fragment,{children:[Object(E.jsxs)("p",{children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",t,"!"]}),Object(E.jsx)("img",{src:n,alt:"profle"})]})};var N=function(e){var t=e.onLogin,n=s.a.useState(""),a=Object(u.a)(n,2),c=(a[0],a[1],s.a.useState("")),r=Object(u.a)(c,2),o=r[0],j=r[1],b=s.a.useState(!1),O=Object(u.a)(b,2),m=O[0],p=O[1],h=function(){var e=Object(l.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={roomId:"Itransition Chat",userName:o},p(!0),e.next=4,d.a.post("/rooms",n);case 4:t(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(E.jsxs)("div",{className:"join-block",children:[Object(E.jsx)("input",{type:"text",placeholder:"Your Chat Nickname",value:o,onChange:function(e){return j(e.target.value)}}),Object(E.jsx)("button",{disabled:m,onClick:h,className:"btn btn-success",children:m?"ENTER..":"ENTER"})]})};var y=function(e){var t=e.users,n=e.messages,a=e.userName,c=e.roomId,r=e.onAddMessage,o=s.a.useState(""),i=Object(u.a)(o,2),l=(i[0],i[1]),j=s.a.useRef(null);return s.a.useEffect((function(){j.current.scrollTo(0,99999)}),[n]),Object(E.jsxs)("div",{className:"chat",children:[Object(E.jsxs)("div",{className:"chat-users",children:["Room: ",Object(E.jsx)("b",{children:c}),Object(E.jsx)("hr",{}),Object(E.jsxs)("b",{children:["Online (",t.length,"):"]}),Object(E.jsx)("ul",{children:t.map((function(e,t){return Object(E.jsx)("li",{children:e},e+t)}))})]}),Object(E.jsxs)("div",{className:"chat-messages",children:[Object(E.jsx)("div",{ref:j,className:"messages",children:n.map((function(e){return Object(E.jsxs)("div",{className:"message",children:[Object(E.jsx)("p",{children:e.text}),Object(E.jsx)("div",{children:Object(E.jsx)("span",{children:"Sent by "+e.userName})})]})}))}),Object(E.jsxs)("form",{children:[Object(E.jsx)("button",{onClick:function(){O.emit("ROOM:NEW_MESSAGE",{userName:a,roomId:c,text:"Hello Bro",messageValue:"Hello Bro"}),r({userName:a,text:"Hello Bro"}),l("")},type:"button",className:"btn btn-primary",children:"Hello Bro"}),Object(E.jsx)("button",{onClick:function(){O.emit("ROOM:NEW_MESSAGE",{userName:a,roomId:c,text:"Hello Sis",messageValue:"Hello Sis"}),r({userName:a,text:"Hello Sis"}),l("")},type:"button",className:"btn btn-primary",children:"Hello Sis"})]})]})]})};var w=function(){var e=s.a.useReducer(h,{joined:!1,roomId:null,userName:null,users:[],messages:[]}),t=Object(u.a)(e,2),n=t[0],a=t[1],c=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"JOINED",payload:t}),O.emit("ROOM:JOIN",t),e.next=4,d.a.get("/rooms/".concat(t.roomId));case 4:n=e.sent,s=n.data,a({type:"SET_DATA",payload:s});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(e){a({type:"SET_USERS",payload:e})},o=function(e){a({type:"NEW_MESSAGE",payload:e})};return s.a.useEffect((function(){O.on("ROOM:SET_USERS",r),O.on("ROOM:NEW_MESSAGE",o)}),[]),window.socket=O,Object(E.jsx)("div",{className:"wrapper",children:n.joined?Object(E.jsx)(y,Object(p.a)(Object(p.a)({},n),{},{onAddMessage:o})):Object(E.jsx)(N,{onLogin:c})})},I=function(e){Object(x.a)(n,e);var t=Object(S.a)(n);function n(){var e;Object(f.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={name:null,imgUrl:null},e.signIn=function(){window.gapi.auth2.getAuthInstance().signIn().then((function(t){var n=t.getBasicProfile();e.setState({name:n.getName(),imgUrl:n.getImageUrl()})}))},e.signOut=function(){window.gapi.auth2.getAuthInstance().signOut().then((function(){e.setState({name:null,imgUrl:null})}))},e}return Object(g.a)(n,[{key:"componentDidMount",value:function(){var e=function(e){console.log("init OK",e)},t=function(e){console.log("error",e)};window.gapi.load("auth2",(function(){window.gapi.auth2.init({client_id:"1060101055653-4tfom6a5moevaqc2hhe85g8o8bs3gadc.apps.googleusercontent.com"}).then(e,t)}))}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.imgUrl;return Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)("header",{className:"App-header",children:[!t&&Object(E.jsx)("button",{class:"btn btn-primary",onClick:this.signIn,children:"  Google Sign In  "}),!t&&Object(E.jsx)("p",{class:"font-weight-bold",children:"  10000 Bro!  20000 Sis!"}),!!t&&Object(E.jsx)(w,{}),!!t&&Object(E.jsx)(v,{name:t,imgUrl:n})]})})}}]),n}(a.Component),A=I;var M=function(){var e=s.a.useReducer(h,{joined:!1,roomId:null,userName:null,users:[],messages:[]}),t=Object(u.a)(e,2),n=(t[0],t[1]),a=function(e){n({type:"SET_USERS",payload:e})},c=function(e){n({type:"NEW_MESSAGE",payload:e})};return s.a.useEffect((function(){O.on("ROOM:SET_USERS",a),O.on("ROOM:NEW_MESSAGE",c)}),[]),window.socket=O,Object(E.jsxs)("div",{className:"wrapper",children:[Object(E.jsx)(A,{}),","]})},R=(n(75),n(43)),k=n.n(R),_=n(78);var T=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)({}),r=Object(u.a)(c,2),o=r[0],i=r[1],l=Object(a.useState)(""),j=Object(u.a)(l,2),d=(j[0],j[1]);return Object(E.jsxs)("div",{class:"container",children:[!n&&Object(E.jsx)(k.a,{appId:"610136123510751",autoLoad:!1,fields:"name,email,picture",scope:"public_profile,user_friends",callback:function(e){console.log("response Authfb"+e),i(e),d(e.picture.data.url),e.accessToken?s(!0):s(!1)},icon:"fa-facebook"}),n&&Object(E.jsx)(w,{}),Object(E.jsx)(_.a,{children:n&&Object(E.jsxs)(_.a.Body,{children:[Object(E.jsx)(_.a.Title,{children:o.name}),Object(E.jsx)(_.a.Text,{children:o.email})]})})]})};r.a.render(Object(E.jsxs)(s.a.StrictMode,{children:[Object(E.jsx)(T,{}),",",Object(E.jsx)(M,{}),","]}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.fe1bc221.chunk.js.map